<!DOCTYPE html>
<html>
<head>
	<title>HanTTS</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<script src="https://code.jquery.com/jquery-3.2.1.js"   integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="   crossorigin="anonymous"></script>
<div id="imagebox">
<img src="HanTTS.png" alt="HanTTS.png" style="width:300px;height:80px;">
</div>
<br>
<textarea id="input-text" placeholder="输入中文："></textarea>
<br>
<button class="btn" id="bt">合成</button>
<br>
<audio id="sound0" controls="true" ></audio>
<br>
<button class="btn" id="download">下载</button>

<script type="text/javascript">
	$("#sound0").css("display", "none");
	$("#download").css("display", "none")
	$("#bt").click(function() {
		var text = $("#input-text").val();
		if (text.length == 0) {
			alert("内容不能为空");
		} else if (text.length > 1000) {
			alert("The input is too long. Please enter < 1000 characters.");
		} else {
			$.ajax({
				url: "/",
				data: JSON.stringify({"text": text}),
				contentType: "application/json",
				type: "POST",
				success: function(data) {
					alert("Synthesis Complete.")
					$("#sound0").css({"display": "", "margin-top": "16px","width": "300px"});
					var IP = data;
					var playme = document.getElementById('sound0'); 
					playme.src='../audio/generated'+IP+'.wav'+"?bust=" + new Date().getTime(); 
					playme.load();
					$("#download").css("display", "") // show download button
				}
			});
		}
	});
	$("#download").click(function() {
		window.location.replace("/file");
	});
$.get( "/count", function( data ) {
  $( "#counter" ).html( data );
});
</script>
<div id="footer">Author: <a href="http://github.com/junzew">github/junzew</a></div>
Page visit count: <span id="counter" color="white"></span>
</body>
</html>
